var link=document.querySelector(".write");var popup=document.querySelector(".modal-content");var close=popup.querySelector(".modal-content-close");var form=popup.querySelector("form");var nameField=popup.querySelector("[name=name]");var mailField=popup.querySelector("[name=mail]");var storage=localStorage.getItem("name");link.addEventListener("click",function(event){event.preventDefault();popup.classList.add("modal-content-show");if(storage){nameField.value=storage;nameField.focus();}else{nameField.focus();}nameField.focus();});close.addEventListener("click",function(event){event.preventDefault();popup.classList.remove("modal-content-show");popup.classList.remove("modal-error");});form.addEventListener("submit",function(event){if(!nameField.value||!mailField.value){event.preventDefault();console.log("Нужно ввести имя и почту");popup.classList.remove("modal-error");popup.offsetWidth=popup.offsetWidth;popup.classList.add("modal-error");}else{localStorage.setItem("name",nameField.value);}});window.addEventListener("keydown",function(event){if(event.keyCode===27){if(popup.classList.contains("modal-content-show")){popup.classList.remove("modal-content-show");popup.classList.remove("modal-error");}}});function init(){myMap=new ymaps.Map('map',{center:[59.93863106417265,30.3230545],zoom:18});myMap.controls.add('zoomControl',{left:15,top:15});myPlacemark=new ymaps.Placemark([59.93863106417265,30.3230545],{},{iconImageHref:'img/map-marker.png',iconImageSize:[231,190],myMap.geoObjects.add(myPlacemark);}ymaps.ready(init);